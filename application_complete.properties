# ========================================
# CONFIGURATION MYBANKMANAGER COMPLETE
# ========================================

# Application
spring.application.name=MyBankManager Complete
server.port=8080
server.servlet.context-path=/api

# Profile actif
spring.profiles.active=dev

# ========================================
# BASE DE DONNEES
# ========================================

# MySQL Configuration
spring.datasource.url=jdbc:mysql://localhost:3306/mybankmanager_complete?useSSL=true&serverTimezone=UTC&allowPublicKeyRetrieval=true&useUnicode=true&characterEncoding=UTF-8
spring.datasource.username=root
spring.datasource.password=password
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# Connection Pool
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=600000
spring.datasource.hikari.connection-timeout=30000

# JPA/Hibernate
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=true
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_size=25
spring.jpa.properties.hibernate.cache.use_second_level_cache=true
spring.jpa.properties.hibernate.cache.region.factory_class=org.hibernate.cache.jcache.JCacheRegionFactory

# ========================================
# SECURITE
# ========================================

# JWT Configuration
jwt.secret=MyBankManagerSecretKeyForJWTTokenGenerationAndValidation2024!
jwt.expiration=86400000
jwt.refresh-expiration=604800000

# Security
security.require-ssl=false
security.password.min-length=8
security.password.require-uppercase=true
security.password.require-lowercase=true
security.password.require-numbers=true
security.password.require-special-chars=true
security.max-login-attempts=5
security.lockout-duration=1800000

# Session
server.servlet.session.timeout=30m
server.servlet.session.cookie.secure=false
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.same-site=strict

# ========================================
# MIGRATION BASE DE DONNEES
# ========================================

# Flyway
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true
spring.flyway.validate-on-migrate=true

# ========================================
# CACHE
# ========================================

# Redis Cache
spring.data.redis.host=localhost
spring.data.redis.port=6379
spring.data.redis.timeout=2000ms
spring.cache.type=redis
spring.cache.redis.time-to-live=600000
spring.cache.redis.cache-null-values=false

# ========================================
# EMAIL
# ========================================

# SMTP Configuration
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=${MAIL_USERNAME:your-email@gmail.com}
spring.mail.password=${MAIL_PASSWORD:your-password}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com

# Email Templates
app.mail.from=noreply@mybankmanager.com
app.mail.support=support@mybankmanager.com

# ========================================
# DOCUMENTATION API
# ========================================

# Swagger/OpenAPI
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operations-sorter=method
springdoc.swagger-ui.tags-sorter=alpha
springdoc.swagger-ui.try-it-out-enabled=true
springdoc.packages-to-scan=com.mybankmanager.controller

# ========================================
# MONITORING
# ========================================

# Actuator
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=when-authorized
management.metrics.export.prometheus.enabled=true

# ========================================
# LOGGING
# ========================================

# Logging Configuration
logging.level.com.mybankmanager=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.web=INFO
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Log File
logging.file.name=logs/mybankmanager.log
logging.file.max-size=10MB
logging.file.max-history=30
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
logging.pattern.console=%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n

# ========================================
# CONFIGURATION METIER
# ========================================

# Banking Configuration
app.banking.account-number-prefix=MA64
app.banking.default-currency=MAD
app.banking.max-daily-transfer=100000.00
app.banking.max-monthly-transfer=500000.00
app.banking.min-account-balance=100.00

# Loan Configuration
app.loans.max-amount=5000000.00
app.loans.min-amount=5000.00
app.loans.max-duration-years=25
app.loans.min-duration-years=1
app.loans.default-interest-rate=7.5

# Card Configuration
app.cards.default-daily-limit=5000.00
app.cards.default-monthly-limit=50000.00
app.cards.card-validity-years=3

# File Upload
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=50MB
app.file.upload-dir=uploads
app.file.allowed-types=pdf,jpg,jpeg,png,doc,docx

# ========================================
# PERFORMANCES
# ========================================

# Threading
spring.task.execution.pool.core-size=10
spring.task.execution.pool.max-size=50
spring.task.execution.pool.queue-capacity=100
spring.task.execution.thread-name-prefix=banking-task-

# Jackson
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=UTC
spring.jackson.default-property-inclusion=NON_NULL

# ========================================
# CORS
# ========================================

# CORS Configuration
app.cors.allowed-origins=http://localhost:3000,http://localhost:8080,http://localhost:5173
app.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
app.cors.allowed-headers=*
app.cors.allow-credentials=true
app.cors.max-age=3600

# ========================================
# NOTIFICATIONS
# ========================================

# SMS Configuration (exemple avec un provider)
app.sms.enabled=false
app.sms.provider=twilio
app.sms.api-key=${SMS_API_KEY:your-sms-api-key}
app.sms.sender=${SMS_SENDER:MyBankManager}

# Push Notifications
app.notifications.enabled=true
app.notifications.queue-size=1000

# ========================================
# BACKUP ET MAINTENANCE
# ========================================

# Database Backup
app.backup.enabled=true
app.backup.schedule=0 0 2 * * *
app.backup.retention-days=30
app.backup.location=backups/

# Maintenance Mode
app.maintenance.enabled=false
app.maintenance.message=Système en maintenance. Retour prévu dans quelques minutes.

# ========================================
# ENVIRONNEMENT SPECIFIQUE
# ========================================

# Development
---
spring.config.activate.on-profile=dev
logging.level.com.mybankmanager=DEBUG
spring.jpa.show-sql=true

# Test
---
spring.config.activate.on-profile=test
spring.datasource.url=jdbc:h2:mem:testdb
spring.datasource.driver-class-name=org.h2.Driver
spring.jpa.hibernate.ddl-auto=create-drop

# Production
---
spring.config.activate.on-profile=prod
logging.level.com.mybankmanager=INFO
spring.jpa.show-sql=false
security.require-ssl=true
server.servlet.session.cookie.secure=true
